
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Ruby on Rails Blog</title>
	<meta name="author" content="Ken Lu, Andrew Sheelan">

	
	<meta name="description" content="Following are some of the common git aliases, people use. Add them to ~/.bash_profile 1
2
3
4
5
6
7
8
9
10
alias g='git'
alias gst='git status' &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Ruby on Rails Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Ruby on Rails Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:hlee.github.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:hlee.github.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/13/git-alias/">
		
			Git Alias</a>
	</h2>
	<div class="entry-content">
		<p>Following are some of the common git aliases, people use. Add them to ~/.bash_profile</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>alias g='git'
</span><span class='line'>alias gst='git status'
</span><span class='line'>alias gs='git push'
</span><span class='line'>alias gc='git commit'
</span><span class='line'>alias gca='git commit -a'
</span><span class='line'>alias ga='git add'
</span><span class='line'>alias gco='git checkout'
</span><span class='line'>alias gb='git branch'
</span><span class='line'>alias gm='git merge'
</span><span class='line'>alias gd="git diff"</span></code></pre></td></tr></table></div></figure>


<p>An additional syntax highlighting can be provided as well with the following:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export CLICOLOR=1
</span><span class='line'>export LSCOLORS=gxfxaxdxcxegedabagacad</span></code></pre></td></tr></table></div></figure>


<p>Any questions on this, please feel free to ask. We&#8217;re here to help&#8230;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-13T09:32:00-05:00" pubdate data-updated="true">Nov 13<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/alias/'>alias</a>, <a class='category' href='/blog/categories/git/'>git</a>


</div>
	
		<span class="comments"><a href="/blog/2012/11/13/git-alias//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/12/mountain-lion-and-homebrew/">
		
			Mountain Lion and Homebrew</a>
	</h2>
	<div class="entry-content">
		<p><a href="https://gist.github.com/1860902">SOURCE</a></p>

<p>Get Mountain Lion and Homebrew to Be Happy:</p>

<p>1) Install XCode 4.4 into /Applications</p>

<p>Get it from the App Store.</p>

<p>2) Install Command Line Tools</p>

<p>In XCode&#8217;s Preferences > Downloads you can install command line tools.</p>

<p>3) Let Everyone Know Where XCode Is</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">sudo</span> <span class="n">xcode</span><span class="o">-</span><span class="n">select</span> <span class="o">-</span><span class="k">switch</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Xcode</span><span class="p">.</span><span class="n">app</span><span class="o">/</span><span class="n">Contents</span><span class="o">/</span><span class="n">Developer</span>
</span></code></pre></td></tr></table></div></figure>


<p>4) Install X11</p>

<p>Visit http://xquartz.macosforge.org/trac/wiki and download and install 2.7.2+.</p>

<p>You will need to fix the symlink it makes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>ln -s /opt/X11 /usr/X11
</span></code></pre></td></tr></table></div></figure>


<p>5) Reinstall your brews</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>brew list
</span></code></pre></td></tr></table></div></figure>


<p>Will tell you what you need to check. Try out everything one by one and when one doesn&#8217;t work brew remove it and then reinstall it. If the install doesn&#8217;t work, try brew install it &#8211;use-gcc to prevent llvm from getting in the way.
You might need to install libxml2 and link it manually to make sure you don&#8217;t get the wrong xml2-config if your path:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>brew install libxml2
</span><span class='line'>brew link libxml2
</span><span class='line'>Run brew doctor and fix anything it tells you.
</span></code></pre></td></tr></table></div></figure>


<p>You may also need to symlink gcc for certain ruby gems and other stuff like that:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo ln -s /usr/bin/gcc /usr/bin/gcc-4.2
</span></code></pre></td></tr></table></div></figure>


<p>Any questions on this, please feel free to ask. We&#8217;re here to help&#8230;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-12T20:42:00-05:00" pubdate data-updated="true">Nov 12<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gcc/'>gcc</a>, <a class='category' href='/blog/categories/homebrew/'>homebrew</a>, <a class='category' href='/blog/categories/mac/'>mac</a>, <a class='category' href='/blog/categories/ruby-gems/'>ruby gems</a>


</div>
	
		<span class="comments"><a href="/blog/2012/11/12/mountain-lion-and-homebrew//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/12/gcc-command-line-tools/">
		
			GCC Command Line Tools</a>
	</h2>
	<div class="entry-content">
		<p>When the bundling gems fail in Mac OS X, Download the latest GCC standalone file from the link below:</p>

<p><a href="https://github.com/kennethreitz/osx-gcc-installer/downloads">gcc standalone tools</a></p>

<p>Any questions on this, please feel free to ask. We&#8217;re here to help&#8230;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-12T20:29:00-05:00" pubdate data-updated="true">Nov 12<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/gcc/'>gcc</a>, <a class='category' href='/blog/categories/mac/'>mac</a>, <a class='category' href='/blog/categories/ruby-gems/'>ruby gems</a>


</div>
	
		<span class="comments"><a href="/blog/2012/11/12/gcc-command-line-tools//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/12/learning-regular-expressions/">
		
			Learning Regular Expressions</a>
	</h2>
	<div class="entry-content">
		<p>Learning Regular expressions require regular practice. Here are a few ways to practice:</p>

<ol>
<li>rails c</li>
<li><a href="http://rubular.com/">Rubular</a></li>
</ol>


<p>Any questions on this, please feel free to ask. We&#8217;re here to help&#8230;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-12T15:54:00-05:00" pubdate data-updated="true">Nov 12<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/regular-expressions/'>regular expressions</a>


</div>
	
		<span class="comments"><a href="/blog/2012/11/12/learning-regular-expressions//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/12/how-to-use-observer-and-call-back/">
		
			How to Use Observer and Call Back</a>
	</h2>
	<div class="entry-content">
		<ul>
<li>Add configuration</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#config/application.rb</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">active_record</span><span class="o">.</span><span class="n">observers</span> <span class="o">=</span> <span class="ss">:order_observer</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Create a Observer Class</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">OrderObserver</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Observer</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">after_update</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</span><span class='line'>    <span class="n">order</span><span class="o">.</span><span class="n">update_column</span><span class="p">(</span><span class="s1">&#39;type_state&#39;</span><span class="p">,</span> <span class="s2">&quot;UPDATED&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>or we can use the way to register</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#config/application.rb</span>
</span><span class='line'><span class="n">config</span><span class="o">.</span><span class="n">active_record</span><span class="o">.</span><span class="n">observers</span> <span class="o">=</span> <span class="ss">:notification_observer</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">NotificationObserver</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Observer</span>
</span><span class='line'>  <span class="n">observe</span> <span class="ss">:account</span><span class="p">,</span> <span class="ss">:balance</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">after_update</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</span><span class='line'>    <span class="n">order</span><span class="o">.</span><span class="n">update_column</span><span class="p">(</span><span class="s1">&#39;type_state&#39;</span><span class="p">,</span> <span class="s2">&quot;UPDATED&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Any questions on this, please feel free to ask. We&#8217;re here to help&#8230;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-12T15:07:00-05:00" pubdate data-updated="true">Nov 12<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/rails3/'>rails3</a>


</div>
	
		<span class="comments"><a href="/blog/2012/11/12/how-to-use-observer-and-call-back//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/11/09/how-to-proxy-a-domain-as-local/">
		
			How to Proxy a Domain to Localhost</a>
	</h2>
	<div class="entry-content">
		<ul>
<li>STEP 1:</li>
</ul>


<p>Edit your hosts file by typing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo vim /etc/hosts
</span></code></pre></td></tr></table></div></figure>


<p>Add the following line to the file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>127.0.0.1 google.com <span class="o">(</span>or whatever other hostname you want proxied<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>STEP 2:</li>
</ul>


<p>Type the following into the command line to (ip foward)set up the server port to 80 in this case it is 3000:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo ipfw add 100 fwd 127.0.0.1,3000 tcp from any to any 80 in
</span></code></pre></td></tr></table></div></figure>


<p>Any questions on this, please feel free to ask. We&#8217;re here to help&#8230;</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-11-09T14:29:00-05:00" pubdate data-updated="true">Nov 9<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/bash/'>bash</a>, <a class='category' href='/blog/categories/ipfw/'>ipfw</a>, <a class='category' href='/blog/categories/mac/'>mac</a>


</div>
	
		<span class="comments"><a href="/blog/2012/11/09/how-to-proxy-a-domain-as-local//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/08/04/some-ruby-on-rails-interview-questions/">
		
			Some Ruby on Rails Interview Questions</a>
	</h2>
	<div class="entry-content">
		<p><strong>what&#8217;s N+1 problem, how to solve the problem</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">clients</span> <span class="o">=</span> <span class="no">Client</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">clients</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">client</span><span class="o">|</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">client</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">postcode</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">clients</span> <span class="o">=</span> <span class="no">Client</span><span class="o">.</span><span class="n">includes</span><span class="p">(</span><span class="ss">:address</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">clients</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">client</span><span class="o">|</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">client</span><span class="o">.</span><span class="n">address</span><span class="o">.</span><span class="n">postcode</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>what&#8217;s the different with joins and includes</strong></p>

<p><strong>explain eager loading and lazy loading</strong></p>

<p><strong>how to get the top 10 average rating product name:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Product</span><span class="p">:</span> <span class="nb">name</span><span class="ss">:string</span><span class="p">,</span> <span class="nb">id</span><span class="ss">:integer</span><span class="p">,</span>
</span><span class='line'><span class="no">Review</span><span class="p">:</span> <span class="nb">id</span><span class="ss">:integer</span><span class="p">,</span> <span class="n">rating</span><span class="ss">:integer</span><span class="p">,</span> <span class="n">product_id</span><span class="p">:</span> <span class="n">integer</span>
</span><span class='line'><span class="c1">#solution</span>
</span><span class='line'><span class="nb">select</span> <span class="nb">p</span><span class="o">.</span><span class="n">name</span> <span class="n">from</span> <span class="n">products</span> <span class="n">as</span> <span class="nb">p</span> <span class="n">inner</span> <span class="n">join</span> <span class="n">review</span> <span class="n">as</span> <span class="n">r</span> <span class="n">group</span> <span class="n">by</span> <span class="n">r</span><span class="o">.</span><span class="n">prouct_id</span> <span class="n">order</span> <span class="n">avg</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">rating</span><span class="p">)</span> <span class="n">limit</span> <span class="mi">10</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>using map and reduce to sum up 5 to 26 which is squareable</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">SQ</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">square</span> <span class="n">num</span>
</span><span class='line'>    <span class="n">num</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
</span><span class='line'>      <span class="k">return</span> <span class="kp">true</span> <span class="k">if</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span> <span class="o">==</span> <span class="n">num</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="mi">5</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="mi">0</span><span class="p">){</span><span class="o">|</span><span class="n">sum</span><span class="p">,</span><span class="n">x</span><span class="o">|</span><span class="n">sum</span> <span class="o">=</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">x</span> <span class="k">if</span> <span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="n">sum</span> <span class="p">}</span>
</span><span class='line'><span class="mi">5</span><span class="o">.</span><span class="n">upto</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="mi">0</span><span class="p">){</span><span class="o">|</span><span class="n">sum</span><span class="p">,</span><span class="n">x</span><span class="o">|</span><span class="n">sum</span> <span class="o">=</span> <span class="n">sum</span> <span class="o">+</span> <span class="p">(</span><span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">?</span> <span class="n">x</span> <span class="p">:</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>dynamic load</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">A</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">check_credit</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;A&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">module</span> <span class="nn">B</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">check_credit</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;B&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">P</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:type</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">process</span>
</span><span class='line'>    <span class="c1">#class_eval</span>
</span><span class='line'>    <span class="c1">#self &lt;&lt; class</span>
</span><span class='line'>      <span class="c1">#include eval(type)</span>
</span><span class='line'>    <span class="c1">#end</span>
</span><span class='line'>    <span class="n">type</span><span class="o">.</span><span class="n">constantize</span><span class="o">.</span><span class="n">check_credit</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">check_credit</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-08-04T18:22:00-04:00" pubdate data-updated="true">Aug 4<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/interview/'>interview</a>, <a class='category' href='/blog/categories/questions/'>questions</a>, <a class='category' href='/blog/categories/rails/'>rails</a>, <a class='category' href='/blog/categories/rails3/'>rails3</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>


</div>
	
		<span class="comments"><a href="/blog/2012/08/04/some-ruby-on-rails-interview-questions//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/04/20/octopress-no-lexer-error/">
		
			Octopress No Lexer Error</a>
	</h2>
	<div class="entry-content">
		<p>just got error</p>

<blockquote><p>/Users/ken/.rvm/gems/ruby-1.9.3-p327/gems/rubypython-0.5.3/lib/rubypython/rubypyproxy.rb:198:in `method_missing&#8217;: ClassNotFound: no lexer for alias &#8216;Ruby&#8217; found (RubyPython::PythonError)</p></blockquote>

<p>the problem is I put <code>Ruby</code> as syntax, It should be just <code>ruby</code></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2012-04-20T08:31:00-04:00" pubdate data-updated="true">Apr 20<span>th</span>, 2012</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/octopress/'>octopress</a>, <a class='category' href='/blog/categories/syntax/'>syntax</a>


</div>
	
		<span class="comments"><a href="/blog/2012/04/20/octopress-no-lexer-error//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/12/26/retry-and-retry-code-blocks/">
		
			Retry and Retry Code Blocks</a>
	</h2>
	<div class="entry-content">
		<h2>simple way to rescue and retry several</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">tries</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="c1"># some routine</span>
</span><span class='line'><span class="k">rescue</span>
</span><span class='line'>  <span class="n">tries</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">retry</span> <span class="k">if</span> <span class="n">tries</span> <span class="o">&lt;=</span> <span class="mi">3</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;no dice!&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="c1">#or</span>
</span><span class='line'><span class="mi">3</span><span class="o">.</span><span class="n">times</span> <span class="k">do</span>
</span><span class='line'>  <span class="k">begin</span>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>  <span class="k">rescue</span>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="k">break</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>with_rescue</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Integer</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">times_try</span>
</span><span class='line'>    <span class="n">n</span> <span class="o">=</span> <span class="nb">self</span>
</span><span class='line'>    <span class="k">begin</span>
</span><span class='line'>      <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="k">yield</span>
</span><span class='line'>    <span class="k">rescue</span>
</span><span class='line'>      <span class="k">raise</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span>
</span><span class='line'>      <span class="k">retry</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="mi">3</span><span class="o">.</span><span class="n">times_try</span> <span class="k">do</span>
</span><span class='line'>    <span class="c1">#some routine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">rescue</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s1">&#39;no dice!&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>if you don&#8217;t want to define</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">begin</span>
</span><span class='line'>  <span class="c1">#your code</span>
</span><span class='line'><span class="k">rescue</span>
</span><span class='line'>  <span class="k">retry</span> <span class="k">if</span> <span class="n">_r</span> <span class="o">=</span> <span class="p">(</span><span class="n">_r</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">_r</span> <span class="o">&lt;</span> <span class="mi">4</span>
</span><span class='line'>  <span class="k">raise</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">with_rescue</span><span class="p">(</span><span class="no">ProtocolError</span><span class="p">,</span> <span class="ss">:limit</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">try</span><span class="o">|</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">try</span> <span class="o">==</span> <span class="mi">0</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;HTTP/1.1&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;HTTP/1.0&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Retry Block Code</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Options:</span>
</span><span class='line'><span class="c1"># * :tries - Number of retries to perform. Defaults to 1.</span>
</span><span class='line'><span class="c1"># * :on - The Exception on which a retry will be performed. Defaults to Exception, which retries on any Exception.</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="c1"># Example</span>
</span><span class='line'><span class="c1"># =======</span>
</span><span class='line'><span class="c1">#   retryable(:tries =&gt; 1, :on =&gt; OpenURI::HTTPError) do</span>
</span><span class='line'><span class="c1">#     # your code here</span>
</span><span class='line'><span class="c1">#   end</span>
</span><span class='line'><span class="c1">#</span>
</span><span class='line'><span class="k">def</span> <span class="nf">retryable</span><span class="p">(</span><span class="n">options</span> <span class="o">=</span> <span class="p">{},</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
</span><span class='line'>  <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:tries</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:on</span> <span class="o">=&gt;</span> <span class="no">Exception</span> <span class="p">}</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">retry_exception</span><span class="p">,</span> <span class="n">retries</span> <span class="o">=</span> <span class="n">opts</span><span class="o">[</span><span class="ss">:on</span><span class="o">]</span><span class="p">,</span> <span class="n">opts</span><span class="o">[</span><span class="ss">:tries</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">begin</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">yield</span>
</span><span class='line'>  <span class="k">rescue</span> <span class="n">retry_exception</span>
</span><span class='line'>    <span class="k">retry</span> <span class="k">if</span> <span class="p">(</span><span class="n">retries</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">yield</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>us it as</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">retryable</span><span class="p">(</span><span class="ss">:tries</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="ss">:on</span> <span class="o">=&gt;</span> <span class="no">OpenURI</span><span class="o">::</span><span class="no">HTTPError</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;http://example.com/flaky_api&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># Code that mashes up stuff for your &quot;social networking&quot; site.</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here are the <tt><a href="http://pastie.caboo.se/138570">Kernel#retryable specs (pastie)</a></tt><a href="http://blog.codefront.net/2008/01/14/retrying-code-blocks-in-ruby-on-exceptions-whatever/">.</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-12-26T06:20:00-05:00" pubdate data-updated="true">Dec 26<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/block/'>block</a>, <a class='category' href='/blog/categories/rescue/'>rescue</a>, <a class='category' href='/blog/categories/retry/'>retry</a>


</div>
	
		<span class="comments"><a href="/blog/2011/12/26/retry-and-retry-code-blocks//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2011/11/06/webkit-and-rspec-without-x-server/">
		
			Webkit and Rspec Without X Server</a>
	</h2>
	<div class="entry-content">
		<h2>capybara-webkit</h2>

<p>problems running capybara-webkit with the Headless gem, Xvfb and our ci server. We use this setup for automatic integration testing and javascript testing of our Ruby on Rails 3.2 app. During the tests it complains that</p>

<blockquote><p>webkit_server: cannot connect to X server
need to rspec to config as:</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s2">&quot;../../config/environment&quot;</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;rspec/rails&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;rspec/autorun&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;capybara/rspec&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;capybara/webkit&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;headless&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">Capybara</span><span class="o">.</span><span class="n">register_driver</span> <span class="ss">:webkit</span> <span class="k">do</span> <span class="o">|</span><span class="n">app</span><span class="o">|</span>
</span><span class='line'>  <span class="no">Capybara</span><span class="o">::</span><span class="no">Driver</span><span class="o">::</span><span class="no">Webkit</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="ss">:ignore_ssl_errors</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Capybara</span><span class="o">.</span><span class="n">javascript_driver</span> <span class="o">=</span> <span class="ss">:webkit</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># don&#39;t run on the local machine (since we don&#39;t have xvfb running locally)</span>
</span><span class='line'><span class="k">if</span> <span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">production?</span>
</span><span class='line'>    <span class="n">headless</span> <span class="o">=</span> <span class="no">Headless</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>    <span class="n">headless</span><span class="o">.</span><span class="n">start</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2011-11-06T07:05:00-05:00" pubdate data-updated="true">Nov 6<span>th</span>, 2011</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/capybara-webkit/'>capybara-webkit</a>, <a class='category' href='/blog/categories/headless/'>headless</a>, <a class='category' href='/blog/categories/rspec/'>rspec</a>, <a class='category' href='/blog/categories/xserver/'>xserver</a>, <a class='category' href='/blog/categories/xvfb/'>xvfb</a>


</div>
	
		<span class="comments"><a href="/blog/2011/11/06/webkit-and-rspec-without-x-server//blog/page/4/index.html#disqus_thread">Comments</a></span>
	
</div></article>

<nav id="pagenavi">
    
        <a href="/blog/page/3/" class="prev">Prev</a>
    
    
        <a href="/blog/page/5/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2012

    Ken Lu, Andrew Sheelan

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'guest';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





</body>
</html>